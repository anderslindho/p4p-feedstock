diff --git a/setup.py b/setup.py
index a348dba..2911678 100755
--- a/setup.py
+++ b/setup.py
@@ -8,14 +8,7 @@ import sysconfig
 from setuptools_dso import Extension, setup, cythonize
 
 import numpy
-
-import epicscorelibs.path
-import epicscorelibs.version
-from epicscorelibs.config import get_config_var
-
-import pvxslibs.path
-import pvxslibs.version
-
+from config import get_config_var
 
 def get_numpy_include_dirs():
     return [numpy.get_include()]
@@ -27,8 +20,12 @@ with open('src/p4p/version.py', 'r') as F:
     package_version = str(lcl['version'])
     del lcl
 
+_cmplr_class = get_config_var('CMPLR_CLASS')
+_os_class = get_config_var('OS_CLASS')
+_ta = get_config_var('T_A')
+
 cxxflags = []
-if get_config_var('CMPLR_CLASS') in ('gcc', 'clang'):
+if _cmplr_class in ('gcc', 'clang'):
     cxxflags += ['-std=c++11']
 ldflags = []
 import sys
@@ -49,6 +46,14 @@ elif platform.system()=='Darwin':
 # Our internal interfaces with generated cython
 # are all c++, and MSVC doesn't allow extern "C" to
 # return c++ types.
+
+_epics_path = os.getenv("EPICS_BASE")
+_epics_incs = [f"{_epics_path}/include", f"{_epics_path}/include/compiler/{_cmplr_class}", f"{_epics_path}/include/os/{_os_class}"]
+_epics_ldflags = get_config_var('LDFLAGS') + [f"-Wl,-rpath,{_epics_path}/lib/{_ta}", f"-L{_epics_path}/lib/{_ta}", "-lCom"]
+_pvxs_path = os.getenv("PVXS")
+_pvxs_inc_path = f"{_pvxs_path}/include"
+_pvxs_ldflags = [f"-L{_pvxs_path}/lib/{_ta}", "-lpvxs"]
+
 cppflags = get_config_var('CPPFLAGS') + [('__PYX_EXTERN_C','extern')]
 
 exts = cythonize([
@@ -62,16 +67,13 @@ exts = cythonize([
             "src/pvxs_type.cpp",
             "src/pvxs_value.cpp",
         ],
-        include_dirs = get_numpy_include_dirs()+[epicscorelibs.path.include_path, pvxslibs.path.include_path, 'src', 'src/p4p'],
+        include_dirs = get_numpy_include_dirs()+_epics_incs+[_pvxs_inc_path, 'src', 'src/p4p'],
         define_macros = cppflags + [
             ('PY_ARRAY_UNIQUE_SYMBOL', 'PVXS_PyArray_API'),
             ('PVXS_ENABLE_EXPERT_API', None),
         ],
         extra_compile_args = get_config_var('CXXFLAGS')+cxxflags,
-        extra_link_args = get_config_var('LDFLAGS')+ldflags,
-        dsos = ['pvxslibs.lib.pvxs',
-                'epicscorelibs.lib.Com'
-        ],
+        extra_link_args = _epics_ldflags+_pvxs_ldflags+ldflags,
         libraries = get_config_var('LDADD'),
     ),
     Extension(
@@ -81,13 +83,10 @@ exts = cythonize([
             'src/pvxs_gw.cpp',
             'src/pvxs_odometer.cpp'
         ],
-        include_dirs = get_numpy_include_dirs()+[epicscorelibs.path.include_path, pvxslibs.path.include_path, 'src', 'src/p4p'],
+        include_dirs = get_numpy_include_dirs()+_epics_incs+[_pvxs_inc_path, 'src', 'src/p4p'],
         define_macros = cppflags + [('PVXS_ENABLE_EXPERT_API', None)],
         extra_compile_args = get_config_var('CXXFLAGS')+cxxflags,
-        extra_link_args = get_config_var('LDFLAGS')+ldflags,
-        dsos = ['pvxslibs.lib.pvxs',
-                'epicscorelibs.lib.Com'
-        ],
+        extra_link_args = _epics_ldflags+_pvxs_ldflags+ldflags,
         libraries = get_config_var('LDADD'),
     )
 ])
@@ -96,8 +95,6 @@ with open(os.path.join(os.path.dirname(__file__), 'README.md')) as F:
     long_description = F.read()
 
 install_requires = [
-    epicscorelibs.version.abi_requires(),
-    pvxslibs.version.abi_requires(),
     'nose2>=0.8.0',
     'ply', # for asLib
 ]
